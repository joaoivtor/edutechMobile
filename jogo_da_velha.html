<canvas width="600" height="400"></canvas>
<link rel="stylesheet" href="testando.css">

<script>

    var tela = document.querySelector("canvas");
    var pincel = tela.getContext("2d");
    var abilitaX = true;

    function velha(){

        pincel.fillStyle = "black";
        pincel.fillRect(250,50, 5,300);

        pincel.fillStyle = "black";
        pincel.fillRect(350,50, 5,300);

        pincel.fillStyle = "black";
        pincel.fillRect(150,150, 300,5);

        pincel.fillStyle = "black";
        pincel.fillRect(150,250, 300,5);

        a1 = false;
        a2 = false;
        a3 = false;
        b1 = false;
        b2 = false;
        b3 = false;
        c1 = false;
        c2 = false;
        c3 = false;

    }

    function fazx(x,y){

        x = x + 80;
        y = y + 40;

        if(abilitaX == true){

            distribui = "simbolox"
            pincel.fillStyle = "blue";
            pincel.beginPath();
            pincel.moveTo(x-10,y);
            pincel.lineTo(x-30,y-45);
            pincel.lineTo(x-60,y-80);
            pincel.fill();

            x = x - 60;
            
            pincel.beginPath();
            pincel.moveTo(x,y);
            pincel.lineTo(x+25,y-45);
            pincel.lineTo(x+60,y-80);
            pincel.fill(); 

            abilitaX = false;

        }else { if(abilitaX == false){

                    distribui = "bola"
                    pincel.fillStyle = "red";
                    pincel.beginPath();
                    pincel.arc(x -30,y- 40,40,0,2*3.14);
                    pincel.fill();

                    pincel.fillStyle = "lightgray";
                    pincel.beginPath();
                    pincel.arc(x -30,y- 40,30,0,2*3.14);
                    pincel.fill();

                    abilitaX = true;
            }
        }
    }

    function jogo(evento){

        var x = evento.pageX; 
        var y = evento.pageY; 



        
        
        //primeira coluna

        if(a1 == false){
            if(x > 450 && x < 550 && y > 100 && y < 250){

            fazx(150,100);
            a1 = true            

            }  
        }

        if(a1 == true){

            if(distribui == "bola"){
                a1 = "bola";
            }else {
                a1 = "simbolox"
            }
        }
            

        if(b1 == false){
            if(x > 450 && x < 550 && y > 255 && y < 355){

                fazx(150,205);
                b1 = true
                
            }
        }    

            if(b1 == true){

                if(distribui == "bola"){
                    b1 = "bola";
                }else{
                    b1 = "simbolox"
                }
            }

        if(c1 == false){

            if(x > 450 && x < 550 && y > 360 && y < 460){

                fazx(150,305);
                c1 = true
                
            }
        }
            if(c1 == true){

                if(distribui == "bola"){
                    c1 = "bola";
                }else{
                    c1 = "simbolox"
                }
        }

            //segunda coluna

        if(a2 == false){

            if(x > 555 && x < 655 && y > 100 && y < 250){

                fazx(255, 100);
                a2 = true
               
            }
        }
            if(a2 == true ){
                if(distribui == "bola"){
                    a2 = "bola";

                }else{
                    a2 = "simbolox"
                }
            } 
            
        

        if(b2 == false){


            if(x > 555 && x < 655 && y > 255 && y < 355){

                fazx(255,205);
                b2 = true
                
            }
        }
            if(b2 == true ){
                    if(distribui == "bola"){
                        b2 = "bola";

                    }else{
                        b2 = "simbolox"
                    }
            }
        

        if(c2 == false){

            if(x > 555 && x < 655 && y > 360 && y < 460){

                fazx(255,305);
                c2 = true
                
            }
        }
            if(c2 == true ){
                    if(distribui == "bola"){
                        c2 = "bola";

                    }else{
                        c2 = "simbolox"
                    }
            }
        

        //terceira coluna

        if(a3 == false){

            if(x > 660 && x < 760 && y > 100 && y < 250){

                fazx(360, 100);
                a3 = true
                
            }
        }

            if(a3 == true){
                if(distribui == "bola"){

                    a3 = "bola";

                }else{
                    a3 = "simbolox"
                }
            }
        
        if(b3 == false){

            if(x > 660 && x < 760 && y > 255 && y < 355){

                fazx(360, 205);
                b3 = true
            }
        }
            if(b3 == true){
                if(distribui == "bola"){

                    b3 = "bola";

                }else{
                    b3 = "simbolox"
                }
            }

        if(c3 == false){

            if(x > 660 && x < 760 && y > 360 && y < 460){

                fazx(360, 305);
                c3 = true
            }
        }
            if(c3 == true){
                if(distribui == "bola"){

                    c3 = "bola";

                }else{
                    c3 = "simbolox"
                }
            }

        //                       Regras

        //primeira linha 
        
        if(a1 == "bola" && a2 == "bola" && a3 == "bola" ){

            alert("Você ganhou");

                pincel.clearRect(0,0,600,400);
                velha();

            
        }

        if(a1 == "simbolox" && a2 == "simbolox" && a3 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //segunda linha

        if(b1 == "bola" && b2 == "bola" && b3 == "bola" ){

            alert("Você ganhou");

            
                pincel.clearRect(0,0,600,400);
                velha();

            
        }

        if(b1 == "simbolox" && b2 == "simbolox" && b3 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //terceira linha

        if(c1 == "bola" && c2 == "bola" && c3 == "bola" ){

            alert("Você ganhou");

            
                pincel.clearRect(0,0,600,400);
                velha();

            
        }

        if(b1 == "simbolox" && b2 == "simbolox" && b3 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //coluna 1

        if(a1 == "bola" && b1 == "bola" && c1 == "bola" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        if(a1 == "simbolox" && b1 == "simbolox" && c1 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //coluna 2

        if(a2 == "bola" && b2 == "bola" && c2 == "bola" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        if(a2 == "simbolox" && b2 == "simbolox" && c2 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //coluna 3

        if(a3 == "bola" && b3 == "bola" && c3 == "bola" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        if(a3 == "simbolox" && b3 == "simbolox" && c3 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //cruzado 1

        if(a1 == "bola" && b2 == "bola" && c3 == "bola" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        if(a1 == "simbolox" && b2 == "simbolox" && c3 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        //cruzado 2

        if(a3 == "bola" && b2 == "bola" && c1 == "bola" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        if(a3 == "simbolox" && b2 == "simbolox" && c1 == "simbolox" ) { 

            alert("Você ganhou");
            pincel.clearRect(0,0,600,400);
            velha();
        }

        if(a1 !== false && a2 !== false && a3 !== false && b1 !== false && b2 !== false && b3 !== false && c1 !== false && c2 !== false && c3 !== false){

        pincel.clearRect(0,0,600,400);
            velha();
        }
    }

    var distribui = "";
    velha();
    tela.onclick = jogo;
    
</script>