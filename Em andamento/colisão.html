
<canvas width="600" height="400"></canvas>


<script>
    var tela = document.querySelector("canvas");
    var pincel = tela.getContext("2d");
    

    function personagem(){
        pincel.fillStyle = "blue";
        pincel.fillRect(px,py,pw,ph);
    }

    function desenhaQuadrado(x,y, tamanho){
        pincel.fillStyle = "red";
        pincel.fillRect(x,y,tamanho,tamanho);
    }

    function andressa(){
        pincel.clearRect(0,0,600,400);
        pincel.fillStyle = "lightgray";
        pincel.fillRect(0,0,600,400);
        personagem();
        desenhaQuadrado(x, y, pw);
        desenhaQuadrado(x2, y2, pw)
        colisao(x, y, pw);
        colisao(x2, y2, pw);
        moverP();

    }
    
    var x2 = 300;
    var y2 = 200;
    var x = 150;
    var y = 200;

    let px = py = 50;
    let pw = ph = 50;
    let vel = 2;
    

    function colisao(posicaoX, posicaoY, tamanho){
        posicaoX = x
        //direita pra esquerda

        if(px == posicaoX + tamanho 
            && py >posicaoY -tamanho && py < posicaoY + tamanho){
            console.log("ola");
                posicaoX -= vel;
            

            }

        // //da esquerda pra direita

        if(px == posicaoX - tamanho
            && py > posicaoY - tamanho && py< posicaoY + tamanho){
                x += vel;
            }

        // // // // de baixo pra cima

        if(px >posicaoX - tamanho && px < posicaoX + tamanho
            && py == posicaoY + tamanho){
                
                y -= vel;
            }

        
        // // // // de cima pra baixo

        if(px >posicaoX - tamanho && px < posicaoX + tamanho
            && py == posicaoY - tamanho){
                
                y += vel;
            }
    }


    
    setInterval(andressa, 10);

    

    addEventListener("keydown", moverPersoDOWN);
    addEventListener("keyup", moverPersoUP);

    let LEFT = 37, UP = 38, RIGHT = 39, DOWN = 40;
    let mvl = mvu = mvr = mvd = false;

    function moverP() {

        //direita pra esquerda

        if (mvl && px > 0) {  
            //px -= vel;
            px -= vel;   

        }

        // de baixo pra cima

        if (mvu && py > 0) {
            py -= vel;

        }

        //da esquerda pra direita

        if (mvr && px < 600 - ph) {
                px += vel;
  
        }
        if (mvd && py < 400 - pw) {
            py += vel;

        }
    }

    function moverPersoDOWN(e) {
        const key = e.keyCode;

        switch (key) {
            case LEFT:
                mvl = true
                break;
            case UP:
                mvu = true
                break;
            case RIGHT:
                mvr = true
                break;
            case DOWN:
                mvd = true
                break;

            default:
        }
    }

    function moverPersoUP(e) {
        const key = e.keyCode;

        switch (key) {
            case LEFT:
                mvl = false
                break;
            case UP:
                mvu = false
                break;
            case RIGHT:
                mvr = false
                break;
            case DOWN:
                mvd = false
                break;
        }
    }



</script>